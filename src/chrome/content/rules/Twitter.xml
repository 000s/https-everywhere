<!--
	Nonfunctional domains:

		- blog.twitter.com		(hosted on Blogger)
		- engineering.twitter.com	(hosted on Blogger; interrupted)


	CDN buckets:

		- twitter-any.s3.amazonaws.com
		- twitter-blog.s3.amazonaws.com
		- d2rdfnizen5apl.cloudfront.net
			- Equivalent to s.twimg.com
		- ssl2.twitter.com.edgekey.net/.../
			- e3826.g.akamaiedge.net/.../
		- platform2.twitter.com.edgesuite.net/.../
			- a1095.g.akamai.net/.../
		- twitter.github.com


	There are still some hosts that things get loaded from that can't
	be safely rewritten without triggering a certificate error.

-->
<ruleset name="Twitter">

	<target host="t.co" />
	<target host="www.t.co" />
	<target host="*.twimg.com" />
	<target host="cdn.syndication.twimg.com" />

	<target host="twitter.com" />
	<target host="*.twitter.com" />
	<target host="cdn.api.twitter.com" />
	<target host="preview.cdn.twitter.com" />
	<target host="twitter.jp" />
	<target host="www.twitter.jp" />


	<securecookie host="^(.*\.)?twitter\.com$" name=".*" />


	<rule from="^https?://(?:www\.)?t\.co/"
		to="https://t.co/" />

	<rule from="^https?://a\d\.twimg\.com/"
		to="https://si0.twimg.com/" />

	<rule from="^http://(jp|ma\d?|o|p|pbs|r|si\d|cdn\.syndication|widgets)\.twimg\.com/"
		to="https://$1.twimg.com/" />

	<rule from="^https?://s\.twimg\.com/"
		to="https://d2rdfnizen5apl.cloudfront.net/" />

	<rule from="^http://((?:(?:cdn\.)?api|business|preview\.cdn|de|dev|en|es|firefox|fr|it|ja|jp|m|media|mobile|oauth|p|platform|search|static|support|upload|www)\.)?twitter\.com/"
		to="https://$1twitter.com/" />

	<rule from="^https?://engineering\.twitter\.com/favicon\.ico"
		to="https://www.blogger.com/favicon.ico"/>

	<!--	platform2:

			- Akamai
			- 403
				-->
	<rule from="^https?://platform2?\.twitter\.com/"
		to="https://platform.twitter.com/" />

	<rule from="^https?://(?:www\.)?twitter\.jp/"
		to="https://twitter.com/"/> 

</ruleset>
