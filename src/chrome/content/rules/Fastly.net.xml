<!--
	For other Fastly coverage, see Fastly.xml.

	Nonfunctional domains:

		- *.global.prod.fastly.net
		- purge.fastly.net	(times out)


	Fully covered domains:

		- *.fastly.net:

			- control
			- mirrors
			- assets1.fastly.com.a.prod	(â†’ fastly.a.ssl.fastly.net)

			- *.a.ssl:

				- fastly
				- fastly-assets

-->
<ruleset name="Fastly.net (partial)">

	<target host="*.fastly.net" />
		<test url="http://swiftype-proxy-fastly.a.ssl.fastly.net/embed.js" />
		<test url="http://virtual-host-discourse.global.ssl.fastly.net" />
		<test url="http://naytev.global.ssl.fastly.net/" />

		<exclusion pattern="^http://(?!assets1\.fastly\.com\.a\.prod\.)[\w.-]+\.prod\.fastly\.net/" />
		<test url="http://www.example.com.global.prod.fastly.net/" />
		<test url="http://www.loveholidays.com.global.prod.fastly.net/" />
		<test url="http://www.cosmopolitan.com.global.prod.fastly.net/" />
		<exclusion pattern="^http://purge\.fastly\.net/" />
		<test url="http://purge.fastly.net/" />
		<!-- Boing Boing icon fonts fail to load, per
				 https://github.com/EFForg/https-everywhere/issues/1597. This seems also related to the CORS bug,
				 https://github.com/EFForg/https-everywhere/issues/49, since the message in the error console is:
				 downloadable font: download failed (font-family: "FontAwesome" style:normal weight:normal stretch:normal src index:2): bad URI or cross-site access not allowed source: http://boingboing.global.ssl.fastly.net/assets/fontawesome-webfont-eeaf3e983ade434b10eda37dfbd6c6d7.woff?http://bbs.boingboing.net&amp;2&v=4.3.0
				-->
		<exclusion pattern="^http://boingboing.global.ssl.fastly.net" />
		<test url="http://boingboing.global.ssl.fastly.net/assets/fontawesome-webfont-eeaf3e983ade434b10eda37dfbd6c6d7.woff?http://bbs.boingboing.net&amp;amp;2&amp;v=4.3.0" />

	<rule from="^http://assets1\.fastly\.com\.a\.prod\.fastly\.net/"
		to="https://fastly.a.ssl.fastly.net/" />
	<test url="http://assets1.fastly.com.a.prod.fastly.net/" />

	<rule from="^http:"
		to="https:" />

</ruleset>
