<!--
	CDN buckets:

		- js.nyt.com.edgesuite.net
		- graphics478.nytimes.com.edgesuite.net
		- json8.nytimes.com.edgesuite.net


	Nonfunctional domains:

		- (www.)nytco.com
		- documents.nytimes.com

-->
<ruleset name="NYTimes (partial)">

	<target host="boston.com" />
	<target host="*.boston.com" />
	<target host="bostonglobe.com" />
	<target host="*.bostonglobe.com" />
		<!--
			- Doesn't work
			- epaper CN: www.pressdisplay.com
							-->
		<exclusion pattern="http://(epaper|spiderbites)\.bostonglobe\.com/" />
	<target host="newyorktimes.com" />
	<target host="www.newyorktimes.com" />
	<target host="nyt.com" />
	<target host="*.nyt.com" />
	<target host="nytimes.com" />
	<target host="*.nytimes.com" />
		<exclusion pattern="^http://(?:www\.)?nytimes\.com/(?:200[0-4]|info)/" />
		<exclusion pattern="^http://(?:www\.)?nytimes\.com/(?:roomfordebate|services/xml/rss/index\.html)" />
		<!--
			404s over https.

			https://mail1.eff.org/pipermail/https-everywhere/2012-June/001448.html
							-->
		<exclusion pattern="^http://(?:www\.)?nytimes\.com/svc/community/V3/requestHandler($|\?)" />
	<target host="*.blogs.nytimes.com" />
	<target host="wt.o.nytimes.com" />
	<target host="markets.on.nytimes.com"/>


	<securecookie host="^(?:.*\.)?boston\.com$" name=".+" />
	<securecookie host="^(?:.*\.)?bostonglobe\.com$" name=".+" />
	<!--
		adxcs isn't needed on unsecurable pages.

		Other cross-domain cookies:

			- RMID

			Used on mobile.
					-->
	<securecookie host="^\.nytimes\.com$" name="^(adxc\w|NYT-S)$" />
	<securecookie host="^homedelivery\.nytimes\.com$" name=".+" />
	<securecookie host="^markets\.on\.nytimes\.com$" name=".+" />


	<rule from="^http://(graphics\.|www\.)?boston\.com/"
		to="https://$1boston.com/" />

	<!--	- cache doesn't work
		- cache CN: *.https.internapcdn.net
							-->
	<rule from="^http://cache\.boston\.com/"
		to="https://graphics.boston.com/" />

	<rule from="^http://deals\.boston\.com/(favicon\.ico|signup|views/)"
		to="https://deals.boston.com/$1" />

	<!--	- Weather doesn't work
		- This is what the server does, aside from https
							-->
	<rule from="^http://weather\.boston\.com/"
		to="https://www.boston.com/weather/" />

	<rule from="^http://(services\.)?bostonglobe\.com/"
		to="https://$1bostonglobe.com/" />

	<!--	www times out.
				-->
	<rule from="^http://www\.bostonglobe\.com/"
		to="https://bostonglobe.com/" />


	<rule from="^http://(?:www\.)?newyorktimes\.com/"
		to="https://www.nytimes.com/" />

	<rule from="^http://(?:www\.)?nyt(?:imes)?\.com/"
		to="https://www.nytimes.com/" />

	<rule from="^http://(?:css|i1|js)\.nyt\.com/"
		to="https://www.nytimes.com/" />

	<rule from="^http://\w+\.blogs\.nytimes\.com/favicon\.ico"
		to="https://www.nytimes.com/favicon.ico" />

	<rule from="^http://(global|homedelivery|mirror-svc|myaccount|wt\.o|markets\.on|static|up)\.nytimes\.com/"
		to="https://$1.nytimes.com/" />

	<rule from="^http://graphics\d\.nytimes\.com/"
		to="https://www.nytimes.com/" />

	<rule from="^http://jobmarket\.nytimes\.com/(adx|images)/"
		to="https://www.nytimes.com/$1/" />

	<rule from="^https?://json8\.nytimes\.com/"
		to="https://static.nytimes.com/" />

	<!--		travel.nytimes.com doesn't work, but
		articles on travel appear to be on www too.

			Ditto for adverts and scripts.
							-->
	<rule from="^http://travel\.nytimes\.com/(\d{4}/\d\d/\d\d|adx|js)/"
		to="https://www.nytimes.com/$1/" />

	<!--	404s over https.

		https://mail1.eff.org/pipermail/https-everywhere/2012-June/001448.html
											-->
	<rule from="^https://www\.nytimes\.com/svc/community/V3/requestHandler($|\?)"
		to="http://www.nytimes.com/svc/community/V3/requestHandler$1" downgrade="1" />

</ruleset>