<!--
	For problematic rules, see Aberystwyth-University-mismatches.xml.


	Nonfunctional subdomains:

		- nexus
		- users

-->
<ruleset name="Aberystwyth University (partial)">

	<target host="aber.ac.uk" />
	<target host="*.aber.ac.uk" />
		<!--
			connect has an invalid certificate, and so is
			handled in Aberystwyth-University-mismatches.xml.
									-->
		<exclusion pattern="^http://(?:connect|nexus|users)\." />
	<target host="aber-ac-uk.campuspack.eu" />


	<!--	c is avoided to avoid cadair, which
		doesn't have blanket support for https.
							-->
	<securecookie host="^[^c]\w+\.aber\.ac\.uk$" name=".+" />


	<!--	!www doesn't work.
					-->
	<rule from="^https?://aber\.ac\.uk/"
		to="https://www.aber.ac.uk/" />

	<!--	Letters are specified so as to avoid cadair,
		which doesn't have blanket support for https.

		Observed subdomains:

			- blackboard
			- careers
			- exchange
			- outlook
			- qmpsum
			- share
			- shibboleth
			- shop
			- staffrecord
			- studentrecord
			- voyager
			- webmail
			- www
				-->
	<rule from="^http://([^c]\w+|careers)\.aber\.ac\.uk/"
		to="https://$1.aber.ac.uk/" />

	<rule from="^http://cadair\.aber\.ac\.uk/dspace/ldap-login"
		to="https://cadair.aber.ac.uk/dspace/ldap-login" />

	<!--	ToDo: Move this to a campuspack ruleset.
								-->
	<rule from="^http://aber-ac-uk\.campuspack\.eu/(Domain|static)/"
		to="https://aber-ac-uk.campuspack.eu/$1/" />

</ruleset>
