<!--
	Nonfunctional:

		- itunes.apple.com	(Akamai; "An error occurred")
		- a1.phobos.apple.com	(Akamai; 503; not on phobos nor ssl)

-->
<ruleset name="Apple.com (partial)">

	<target host="apple.com" />
	<target host="*.apple.com" />
	<target host="km.support.apple.com" />
	<target host="mzstatic.com" />
	<target host="*.mzstatic.com" />


	<securecookie host="^(appleid|application|buyiphone|certifications|connect|daw|developer|devforums|discussions|id|iforgot|itunesconnect|jobs|portal|register|remoteadvisor|selfsolve|ssl|support(profile)?|www)\.apple\.com$" name=".+" />

	<rule from="^http://(?:www\.)?apple\.com/"
		to="https://www.apple.com/" />

	<rule from="^http://(appleid|application|buyiphone|certifications|connect|daw|developer|devforums|discussions|id|iforgot|itunesconnect|jobs|portal|register|remoteadvisor|selfsolve|support(profile)?)\.apple\.com/"
		to="https://$1.apple.com/" />

	<rule from="^https?://(?:images|ssl)\.apple\.com/"
		to="https://ssl.apple.com/" />

	<!--	Akamai	-->
	<rule from="^https?://km\.support\.apple\.com/"
		to="https://support.apple.com/"/>

	<!--	- Doesn't work over https
		- Redirects over http to www.apple.com
			-->
	<rule from="^https?://(?:www\.)mzstatic\.com/"
		to="https://ssl.apple.com/" />

	<!--	- Akamai
		- 503
		- ssl.apple.com/itunes/ points to a1.mzstatic.com
				-->
	<rule from="^https?://a1\.mzstatic\.com/"
		to="http://a1.mzstatic.com/" downgrade="1" />

</ruleset>
