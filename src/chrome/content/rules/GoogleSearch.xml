<!--
	For other Google coverage, see GoogleServices.xml
-->
<ruleset name="Google Search">
	<target host="google.*" />
	<target host="www.google.*" />

	<rule from="^http://(www\.)?google\.((?:com?\.)?\w{2,3})/(?=#|\?|$)"
		to="https://www.google.$2/" />
		<test url="http://google.ca/" />
		<test url="http://google.com/" />
		<test url="http://google.com.au/" />
		<test url="http://www.google.ca/#" />
		<test url="http://www.google.com/#" />
		<test url="http://www.google.com.au/#" />
		<test url="http://www.google.ca/?" />
		<test url="http://www.google.com/?" />
		<test url="http://www.google.com.au/?" />

	<!--	A very annoying exception that we
		seem to need for the basic case
						-->
	<exclusion pattern="^http://(www\.)?google\.com/search.*tbs=shop" />
		<test url="http://google.com/search?q=test&amp;tbs=shop" />
		<test url="http://www.google.com/search?q=test&amp;tbs=shop" />
		<test url="http://www.google.com/search?q=foobar&amp;tbs=shop" />

	<!--	This is necessary for image results
		links from web search results
						-->
	<exclusion pattern="^http://(www\.)?google\.com/search.*tbm=isch.*" />
		<test url="http://google.com/search?q=test&amp;tbm=isch" />
		<test url="http://www.google.com/search?q=test&amp;tbm=isch" />
		<test url="http://www.google.com/search?q=foobar&amp;tbm=isch" />
		<test url="http://www.google.com/search?q=foobar&amp;tbm=isch&amp;something=baz" />

	<!-- Paths -->
	<rule from="^http://(www\.)?google\.((?:com?\.)?\w{2,3})/(about|search|setprefs|teapot|webhp)"
		to="https://www.google.$2/$3" />
		<test url="http://google.ca/about" />
		<test url="http://google.com/about" />
		<test url="http://google.com.au/about" />
		<test url="http://www.google.ca/about" />
		<test url="http://www.google.com/about" />
		<test url="http://www.google.com.au/about" />
		<test url="http://google.ca/search" />
		<test url="http://google.com/search" />
		<test url="http://google.com.au/search" />
		<test url="http://www.google.ca/search" />
		<test url="http://www.google.com/search" />
		<test url="http://www.google.com.au/search" />
		<test url="http://google.ca/setprefs" />
		<test url="http://google.com/setprefs" />
		<test url="http://google.com.au/setprefs" />
		<test url="http://www.google.ca/setprefs" />
		<test url="http://www.google.com/setprefs" />
		<test url="http://www.google.com.au/setprefs" />
		<test url="http://www.google.ca/setprefs" />
		<test url="http://www.google.com/setprefs" />
		<test url="http://www.google.com.au/setprefs" />
		<test url="http://google.ca/teapot" />
		<test url="http://google.com/teapot" />
		<test url="http://google.com.au/teapot" />
		<test url="http://www.google.ca/teapot" />
		<test url="http://www.google.com/teapot" />
		<test url="http://www.google.com.au/teapot" />
		<test url="http://google.ca/webhp" />
		<test url="http://google.com/webhp" />
		<test url="http://google.com.au/webhp" />
		<test url="http://www.google.ca/webhp" />
		<test url="http://www.google.com/webhp" />
		<test url="http://www.google.com.au/webhp" />
</ruleset>
