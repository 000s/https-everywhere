<!--
	Other Google rulesets:
		- See GoogleServices.xml for the list
-->
<ruleset name="Google Search">

	<target host="google.com" />
	<target host="*.google.com" />
	<target host="google.com.*" />
	<target host="www.google.com.*" />
	<target host="google.co.*" />
	<target host="www.google.co.*" />
	<target host="google.*" />
	<target host="www.google.*" />

	<rule from="^http://(www\.)?google\.((?:com?\.)?\w{2,3})/(?=#|\?|$)"
		to="https://www.google.$2/" />

	<!--	A very annoying exception that we
		seem to need for the basic case
						-->
	<exclusion pattern="^http://(?:www\.)?google\.com/search.*tbs=shop" />

	<!--	This is necessary for image results
		links from web search results
						-->
	<exclusion pattern="^http://(?:www\.)?google\.com/search.*tbm=isch.*" />

	<!--	There are two distinct cases for these firefox searches	-->

	<rule from="^http://(?:www\.)?google(?:\.com?)?\.[a-z]{2}/firefox/?$"
		to="https://www.google.com/" />

	<rule from="^http://(?:www\.)?google(?:\.com?)?\.[a-z]{2}/firefox"
		to="https://www.google.com/webhp" />

	<rule from="^http://(?:www\.)?google\.com/webhp"
		to="https://www.google.com/webhp" />

	<rule from="^http://codesearch\.google\.com/"
		to="https://www.google.com/codesearch/" />
		<test url="http://codesearch.google.com/" />

	<rule from="^http://(?:www\.)?google\.com/codesearch"
		to="https://www.google.com/codesearch" />

	<!--	most google international sites look like
		"google.fr", some look like "google.co.jp",
		and some crazy ones like "google.com.au"	-->

	<rule from="^http://(www\.)?google(\.com?)?\.([a-z]{2})/(search\?|#)"
		to="https://$1google$2.$3/$4" />

	<rule from="^http://(www\.)?google\.(com?\.)?([a-z]{2})/(?:webhp)?$"
		to="https://$1google.$2$3/" />

	<!--	If there are URL parameters, keep them.	-->
	<rule from="^http://(www\.)?google\.(com?\.)?([a-z]{2})/(?:webhp)?\?"
		to="https://$1google.$2$3/webhp?" />

	<!-- Paths -->
	<rule from="^http://(www\.)?google\.((?:com?\.)?\w{2,3})/(about|search|setprefs|teapot)"
		to="https://www.google.$2/$3" />
		<test url="http://google.ca/teapot" />
		<test url="http://google.com/teapot" />
		<test url="http://google.com.au/teapot" />
		<test url="http://www.google.ca/teapot" />
		<test url="http://www.google.com/teapot" />
		<test url="http://www.google.com.au/teapot" />

</ruleset>
