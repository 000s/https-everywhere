<!--
	Other Google rulesets:
		- See GoogleServices.xml for the list
-->
<ruleset name="Google Search">

	<target host="google.com" />
	<target host="*.google.com" />
	<target host="google.com.*" />
	<target host="www.google.com.*" />
	<target host="google.co.*" />
	<target host="www.google.co.*" />
	<target host="google.*" />
	<target host="www.google.*" />

	<rule from="^http://(www\.)?google\.((?:com?\.)?\w{2,3})/(?=#|\?|$)"
		to="https://www.google.$2/" />
		<test url="http://google.ca/" />
		<test url="http://google.com/" />
		<test url="http://google.com.au/" />
		<test url="http://www.google.ca/#" />
		<test url="http://www.google.com/#" />
		<test url="http://www.google.com.au/#" />
		<test url="http://www.google.ca/?" />
		<test url="http://www.google.com/?" />
		<test url="http://www.google.com.au/?" />

	<!--	A very annoying exception that we
		seem to need for the basic case
						-->
	<exclusion pattern="^http://(?:www\.)?google\.com/search.*tbs=shop" />

	<!--	This is necessary for image results
		links from web search results
						-->
	<exclusion pattern="^http://(?:www\.)?google\.com/search.*tbm=isch.*" />

	<!--	There are two distinct cases for these firefox searches	-->

	<rule from="^http://(?:www\.)?google(?:\.com?)?\.[a-z]{2}/firefox/?$"
		to="https://www.google.com/" />

	<rule from="^http://(?:www\.)?google(?:\.com?)?\.[a-z]{2}/firefox"
		to="https://www.google.com/webhp" />

	<!-- Paths -->
	<rule from="^http://(www\.)?google\.((?:com?\.)?\w{2,3})/(about|search|setprefs|teapot|webhp)"
		to="https://www.google.$2/$3" />
		<test url="http://google.ca/about" />
		<test url="http://google.com/about" />
		<test url="http://google.com.au/about" />
		<test url="http://www.google.ca/search" />
		<test url="http://www.google.com/search" />
		<test url="http://www.google.com.au/search" />
		<test url="http://google.ca/setprefs" />
		<test url="http://google.com/setprefs" />
		<test url="http://google.com.au/setprefs" />
		<test url="http://www.google.ca/teapot" />
		<test url="http://www.google.com/teapot" />
		<test url="http://www.google.com.au/teapot" />
		<test url="http://www.google.ca/webhp" />
		<test url="http://www.google.com/webhp" />
		<test url="http://www.google.com.au/webhp" />

	<!-- This doesn't exist anymore, but still rewriting to prevent old queries from being leaked -->
	<rule from="^http://codesearch\.google\.com/"
		to="https://www.google.com/codesearch/" />
		<test url="http://codesearch.google.com/" />

	<rule from="^http://(www\.)?google\.com/codesearch"
		to="https://www.google.com/codesearch" />
		<test url="http://google.com/codesearch" />
		<test url="http://www.google.com/codesearch" />

</ruleset>
