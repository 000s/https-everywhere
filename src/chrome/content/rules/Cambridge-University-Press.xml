<!--
	Problematic subdomains:

		- ^ ¹

	¹ Cert only matches www


	Partially covered subdomains:

		- (www.)? ¹	(^ → www)
		- ebooks ²
		- journals ²

	¹ Some pages redirect to http
	² Avoiding broken MCB


	Fully covered subdomains:

		- mobile.journals	(→ jnls.cup.org)
		- shibboleth


	dictionaryblog.cambridge.org is handled in WordPress-blogs.xml.

-->
<ruleset name="Cambridge University Press (partial)">

	<target host="cambridge.org" />
	<target host="*.cambridge.org" />
		<!--
			Avoid broken MCB:
						-->
		<exclusion pattern="^http://ebooks\.cambridge\.org/(?!.+\.(?:css|ico|jpg|png)(?:$|\?))" />
		<exclusion pattern="^http://journals\.cambridge\.org/+(?!css/|favicon\.ico|images/)" />


	<securecookie host="^(?:assets|dictionary)\.cambridge\.org$" name=".*" />


	<rule from="^http://(?:www\.)?cambridge\.org/(?=files/|(?:generated|other)_files/|login(?:$|[?/])|packages/)"
		to="https://www.cambridge.org/" />

	<!--	Redirect keeps path and args:
						-->
	<rule from="^http://mobile\.journals\.cambridge\.org/+"
		to="https://jnls.cup.org/" />

	<rule from="^http://(assets|dictionary|ebooks|journals|shibboleth)\.cambridge\.org/"
		to="https://$1.cambridge.org/" />

</ruleset>
